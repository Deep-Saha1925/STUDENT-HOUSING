<!--Thymeleaf fragment-->

<div class="row mt-4" id="propertyList" th:fragment="propertyList">
  <div class="col-md-4 mb-4" th:each="p : ${properties}">
    <div class="card property-card h-100">
      <img th:if="${!#lists.isEmpty(p.imageUrls)}"
           th:src="${p.imageUrls[0]}"
           class="property-img" alt="Property Image">

      <img th:if="${#lists.isEmpty(p.imageUrls)}"
           src="https://via.placeholder.com/400x200.png?text=No+Image"
           class="property-img" alt="No Image">

      <div class="card-body">
        <h5 th:text="${p.title}"></h5>
        <p>
          <strong>City:</strong> <span th:text="${p.city}"></span><br>
          <strong>Area:</strong> <span th:text="${p.area}"></span><br>
          <strong>Rent:</strong> â‚¹<span th:text="${p.rent}"></span>
        </p>
        <span class="badge bg-success" th:if="${p.available}">Available</span>
        <span class="badge bg-danger" th:unless="${p.available}">Not Available</span>
        <div class="mt-3">
          <a th:href="@{'/properties/' + ${p.id}}" class="btn btn-outline-primary btn-sm">View Details</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Handle empty search -->
  <div th:if="${#lists.isEmpty(properties)}" class="text-center text-muted">
    ðŸš« No properties found for your search.
  </div>
</div>
